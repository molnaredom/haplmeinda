name: ðŸš€ Deploy to haplmelinda.hu

on:
  push:
    branches:
      - master
    paths:
      - "introducing_page/**"
  workflow_dispatch: # KÃ©zi indÃ­tÃ¡s is lehetsÃ©ges

jobs:
  deploy:
    name: ðŸ“¦ FTP Deploy
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ”„ Checkout repository
        uses: actions/checkout@v4

      - name: ðŸ“¦ Install lftp
        run: sudo apt-get install -y lftp

      - name: ðŸ“¤ Deploy via FTP
        env:
          FTP_PASSWORD: ${{ secrets.FTP_PASSWORD }}
        run: |
          cd introducing_page
          lftp -c "
          set ftp:ssl-allow no;
          set ftp:passive-mode yes;
          set net:timeout 30;
          set net:max-retries 3;
          open -u c40067adam,$FTP_PASSWORD wh14.rackhost.hu;
          chmod 755 web;
          cd web;
          cls -la;
          mirror --reverse --verbose --delete --ignore-time --include-glob .htaccess --exclude .git/ --exclude node_modules/ --exclude netlify/ --exclude-glob *.md . .;
          glob chmod 644 *.html *.css *.js *.json *.toml;
          glob chmod 644 fenykepek/*;
          chmod 755 .;
          chmod 755 fenykepek;
          cls -la;
          quit;
          "

      - name: âœ… Deployment complete
        run: echo "ðŸŽ‰ Successfully deployed to haplmelinda.hu!"
